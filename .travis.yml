language: python
python:
- '3.6'
- '3.7'
- '3.8'
- 3.8-dev
dist: xenial
os: linux
install:
- pip install .
- pip install flake8
before_script:
- python --version
- pip show MirahezeBots-jsonparser
script:
- flake8 MirahezeBots-jsonparser --max-line-length 265 --exclude=__init__.py
after_script:
- pip freeze
deploy:
  provider: pypi
  username: __token__
  password:
    secure: P20/7BLiuCSy31r0EQg72LERq8JQKfwDvluPMqPjIV1FgqSSqRt/K9kmKP0ydUotTWb/a1AOjVqVoLDiiIAgdziu8XxtculYRJIhsl2h6QuSVVOtEGQ6g/r1NboMvTXs12swt8F2ZFTye4SNKBhkHSyqJ488JxnDFRH5eIR5Wb4YoOthbN1xy4dk+ExwmTJrMgaSQ+o3SyzIkEuGS+d/PdjGS+KET/T+bpsaBNVhLItqZF4UHCT/ivy4FRuth9wKZUhl7oqiYRxQxS52wB7nsHG8IPyQMONXhffj3THlUsE8N4U183eqdwg8l6RzGskevjLRJkY63xGQ0zfzWCc1pvQHT9+83cyw6qbKXar/9dHgnuEPAqFi7oFgoVIrfsCegfxJMRme5Nu87GCS+1q+q7h8b5k3ndgtoC4V0ldxsXCKf8Pc3lIUG3qyJSq7qJDAcsBtHL4FI0WvXhETN8ppNokGS69Hmv4iWc1TMZDvPYL0TW/RM3IPtHGawX9KR4q48VZFiKs36mKIMcPfJXSrj5NXfHRgSoRz/aqEULqtDCYyH55nwVSmPO7V6MAKkdU0iJfd05avghRebTVb1165UAp3MF3dqgWV7KDmdVPrFsNRG4GWJWAHlBwFdpyTegXMXHhLkR8yOvlyDisy5vhb8E8qK8YbBFJbl5w8BDLjwk4=
  on:
    python: '3.7'
    tags: true
  skip_existing: true
notifications:
  irc:
    channels:
    - chat.freenode.net#miraheze-bots
    on_success: change
    on_failure: always
    template:
    - "%{repository}/%{branch}/%{commit} - %{author} %{message} %{build_url}"
